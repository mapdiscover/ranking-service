# ratingbyclicks

The interaction with a running instance of `service.py` takes place through gRPC. Currently the service connects to grpc://127.0.0.1:50051

| gRPC method   | gRPC message block | purpose                                                                                                                                  | gPRC input endpoint                                                                                                                                                            | gRPC output endpoint                                                                                                     |
| ------------- | ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------ |
| getIdents     | identifiers        | Returns a list of POI's that can be shown at specified zoomlevel at specified time (based on individual index of its surrounding region) | `identifiers.identifiers=<semicolon seperated list of uuids>` `identifiers.curzoom=<zoom level to request rank for>` `identifiers.minzoom=<Set the minzoom to apply ranking.>` | `status.status=<semicolon seperated list of identifiers> `                                                               |
| increaseClick | click              | Increases click amount by hardcoded value for `event`                                                                                    | `click.identifier=<uuid>` `click.event=<mapclick\|searchresultclick>`                                                                                                          | `status.status=OK`                                                                                                       |
| addEntry      | entry              | Adds a new entry to the database.                                                                                                        | `entry.identifier=<uuid>``entry.longitude=<longitude>` `entry.latitude=<latitude>`                                                                                             | `status.status=OK`,`status.status=BBOX NOT SPECIFIED, ADDING NOT POSSIBLE` or `status.status=Already exists in database` |
| feedback      | status             | echoe's your input back                                                                                                                  | `status.status=<any string>`                                                                                                                                                   | `status.status=<any string you sent>`                                                                                    |
| batch         |                    | Allows batch adding/removing entries                                                                                                     | The following json scheme for the value of `diff.diff`: `{"added": [(identifier, (longitude, latitude)),...],<br/>        "removed: [identifier, ...]"}`                       | `status.status=OK`                                                                                                       |
| deleteEntry   |                    | Removes an entry. Use `BATCH` instead, it is more powerful and calls this underlying function                                            | `identifier=<uuid>`                                                                                                                                                            | `status.status=OK`                                                                                                       |
